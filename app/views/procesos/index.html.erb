<body>

  <div class="row">
    <div class="vistaProcesos large-1 large-offset-11 small-1 right">
              <%= link_to  "javascript:modopanel()", :id => "modopanel" do %>
                     <img id="modopanel1" src="/img/iconos/grid20.png" title="panel">
                <% end %> 

                <%= link_to  "javascript:mododatagrid()", :id => "mododatagrid" do %>
                     <img  id="mododatagrid1" src="/img/iconos/lista.png" title="lista" style="padding: 2px;">
                <% end %> 
    </div> 
  </div>
    

    <div id="workspace" class="workspace">
        <div class="container flat_container"  style="opacity: 1;">
        <div class="panel panelTransparente home_tab project_index  " >

            <title>Procesos</title>

            

            <nav class="projects_nav ">
                <%= link_to '', new_proceso_path %>
            </nav>
            <div class="project_templates nuevoProceso">
                <%= link_to 'Nuevo Proceso', new_proceso_path, :id => "nuevoProcesoBoton"%>
                <hr>
               
                <%= link_to  "javascript:mostrarPanelBuscarProceso()", :id => "mostrarCamposOpcionales" do %>
                     <div class="foundicon-search"></div> Buscar Proceso
                <% end %>
                <br /> 
                <%= link_to  :controller => :procesos, :action => :favoritos , :estado  => 1, :remote => true do%>
                 <div class="foundicon-star alinearbotones" style="display:block; margin-right: -11px !important;"></div> Procesos Favoritos
                <% end %> 
                <br /> 
                <%= link_to 'Todos los Procesos', :controller => :procesos, :action => :favoritos , :estado  => 0 , :remote => true %>
               
               <hr>
               
                <%= link_to  "javascript:mostrarPanelBuscarCliente()", :id => "mostrarCamposOpcionalesClientes", :class =>"ocultar" do %>
                     <div class="foundicon-search"></div> Buscar Cliente
                <% end %> 
                
               
                
            </div>

            <div class="project_templates">
                <hr>
                 <% if !@NumeroAlertasPendientes.nil? %>
                <% if (@NumeroAlertasPendientes > 0) %>
                <strong><%= link_to "Alertas Pendientes ("+@NumeroAlertasPendientes.to_s+")", :alertasPendientes %></strong>
                <% elsif %>
                <%= link_to "Alertas Pendientes ("+@NumeroAlertasPendientes.to_s+")", :alertasPendientes %>
                <% end %>
                <% end %>
                <% if !@NumeroActividadesPendientes.nil? %>
                 <% if (@NumeroActividadesPendientes > 0) %>
                <strong><%= link_to "Actividad Pendientes ("+@NumeroActividadesPendientes.to_s+")", :actividadesPendientes %></strong>
                <% elsif %>
                <%= link_to "Actividad Pendientes ("+@NumeroActividadesPendientes.to_s+")", :actividadesPendientes %>
                <% end %>
                <% end %>
                
            </div>

                <% if (notice) %>
                <div data-alert class="alert-box success radius" style="text-shadow: initial;"><%= notice %></div>
            <% end%>
          


            <div id="panelBuscarProceso" class="row panel panelBusqueda ocultar " style="height: 83px !important; float: none;margin-left: 165px !important;">
                        
                        <%= form_for @proceso, :remote => true , :url => url_for(:controller => 'procesos', :action => 'buscarProceso'),  :html => { :class => "custom", :id => "formBuscarProceso"}  do |f| %>
                            
                            <div class="small-3 large-3 columns " style="margin-top: 8px;">
                                <span data-tooltip class="tip-top" title="Buscar procesos por la referencia del proceso">
                                <%= f.text_field :referencia , :placeholder => "Referencia" %>
                            </div> 
                          
                            <div class="small-4 large-4 columns " style="margin-top: 8px;">
                                <span data-tooltip class="tip-top" title="Buscar procesos por título ">
                                <%= f.text_field :titulo , :placeholder => "Titulo del proceso" %>
                            </div>
                            
                            <div class="small-3 large-3 columns " style="margin-top: 8px;">
                                <span data-tooltip class="tip-top" title="Filtrar busqueda por tipo de proceso">
                               <%= f.select :tipo_proceso_id, [["Todos los Procesos", 0]] + @tipos_procesos.map {|r| [r.tipo,r.id]}, { :disabled => [] } , :id => "listaTiposProceso" %>
                            </div>
                           
                            <div class="small-2 large-2 columns ">
                              <%= f.submit :'Buscar' , :class => " button success radius " %>
                            </div>
                        <% end %> 
                         <%= link_to  "javascript:cerrarPanelBuscarProceso()", :class => "ubicacionCerrarPanel" do%>
                                <img src="/img/xmen.png" title="cerrar">
                          <% end %> 
                        
            </div>

            <div id="all_projects">
                <section id="sectionProcesos" class="projects cards">
                   <div id="listaProcesos" class="row">
                        <%= render @procesos %> 
                        <article class="card blank " data-behavior="bounce_nav">&nbsp;</article>

                    </div>
                    <table id="datagridprocesos" >
                      <thead>
                        <tr>
                          <th></th>
                          <th width="150">Proceso</th>
                          <th>Referencia</th>
                          <th width="100">Estado</th>
                          <th width="150">Ultima mod.</th>
                           <th width="150">Cliente</th>
                            <th width="150">Usuarios</th>
                        </tr>
                      </thead>
                      <tbody>
                        <%= render partial: "procesos2", collection: @procesos , :as => :proceso %>
                        
                      </tbody>
                    </table>
                </section>
            </div>



        </div>
    </div>
    </div>

   

</body>

<!-- Mostrar este mensaje si la lista de participantes esta vacia -->
<% if @procesos.size == 0 %>
<ol id="joyrideProceso" class="joyride-list" data-options="nextButton : true,tipAnimation :    'fade',tipAnimationFadeSpeed: 300" data-joyride>
  <li data-id="nuevoProcesoBoton" data-text="Salir">
    <p>Inicia Creando un nuevo Proceso</p>
  </li>
</ol>

<script>
   $(document).foundation('joyrideProceso', 'start');
</script>
<script type="text/javascript">
    $('#procesostopbar').addClass("active");
  </script>
<% end %>

<script type="text/javascript">
  $('#datagridprocesos').dataTable({
        "oLanguage":{
                  "sProcessing":     "Procesando...",
                  "sLengthMenu":     "Mostrar _MENU_ procesos",
                  "sZeroRecords":    "No se encontraron resultados",
                  "sEmptyTable":     "Ningún proceso disponible",
                  "sInfo":           "Mostrando procesos del _START_ al _END_ de un total de _TOTAL_ procesos",
                  "sInfoEmpty":      "Mostrando procesos del 0 al 0 de un total de 0 procesos",
                  "sInfoFiltered":   "(filtrado de un total de _MAX_ procesos)",
                  "sInfoPostFix":    "",
                  "sSearch":         "Buscar:",
                  "sUrl":            "",
                  "sInfoThousands":  ",",
                  "sLoadingRecords": "Cargando...",
                  "oPaginate": {
                      "sFirst":    "Primero",
                      "sLast":     "Último",
                      "sNext":     "Siguiente",
                      "sPrevious": "Anterior"
                  },
                  "oAria": {
                      "sSortAscending":  ": Activar para ordenar la columna de manera ascendente",
                      "sSortDescending": ": Activar para ordenar la columna de manera descendente"
                  }
          }
    }
    );
  modopanel();
</script>